<%
//가져와야하는 데이터
//var userID = "";
//var userName="";
//var board ="";
//url로 보낸 key로 검색한 travel보드
%>



<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset = "UTF-8">
		<title>WTG</title>
		<link rel = "stylesheet" href = "/public/styles/styles.css"/>
		<script src = "/public/scripts/scripts.js"></script>

		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<!-- include libraries(jQuery, bootstrap) -->
		<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
		<script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
		<!-- include summernote css/js-->
		<link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet">
		<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script>

<script
src="https://code.jquery.com/jquery-3.4.1.min.js"
integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
crossorigin="anonymous">
</script>
<style>
	#map {
	  width:500px; height:300px;
	}
	/* Optional: Makes the sample page fill the window. */
	html, body {
	  height: 50%;
	  margin: 0;
	  padding: 0;
	}
	#description {
	  font-family: Roboto;
	  font-size: 15px;
	  font-weight: 300;
	}

	#infowindow-content .title {
	  font-weight: bold;
	}

	#infowindow-content {
	  display: none;
	}

	#map #infowindow-content {
	  display: inline;
	}

	.pac-card {
	  margin: 10px 10px 0 0;
	  border-radius: 2px 0 0 2px;
	  box-sizing: border-box;
	  -moz-box-sizing: border-box;
	  outline: none;
	  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
	  background-color: #fff;
	  font-family: Roboto;
	}

	#pac-container {
	  padding-bottom: 12px;
	  margin-right: 12px;
	}

	.pac-controls {
	  display: inline-block;
	  padding: 5px 11px;
	}

	.pac-controls label {
	  font-family: Roboto;
	  font-size: 13px;
	  font-weight: 300;
	}

	#pac-input0 {
	  background-color: #fff;
	  font-family: Roboto;
	  font-size: 15px;
	  font-weight: 300;
	  margin-left: 12px;
	  padding: 0 11px 0 13px;
	  text-overflow: ellipsis;
	  width: 400px;
	}

	#pac-input0 :focus {
	  border-color: #4d90fe;
	}

	#title {
	  color: #fff;
	  background-color: #4d90fe;
	  font-size: 25px;
	  font-weight: 500;
	  padding: 6px 12px;
	}
  </style>

		<script>
			var board = <%-JSON.stringify(board)%>;
			var pageNo = 1;
			var maxPage = board.travelTotalSpanTime;
			function renewContent()
			{
				var contentLR = $("#contentTable tr:eq(3)");				
				$("#dayL").text(pageNo + "일차");
				$("#dayR").text(pageNo+1 + "일차");
				contentLR.children("td").eq(0).text("");
				contentLR.children("td").eq(0).append(board["travelContent" + pageNo]);
				contentLR.children("td").children("#pac-card0").attr("id", "pac-card"+pageNo);
				contentLR.children("td").children("#pac-card"+pageNo).children("#pac-container").children("#pac-input0").attr("id", "pac-input"+pageNo);
				contentLR.children("td").children("#infowindow-content0").attr("id", "infowindow-content"+pageNo);
				contentLR.children("td").children("#map0").attr("id", "map"+pageNo);
				contentLR.children("td").children("#inputMapPos0").attr("value",board["travelMapPos"+pageNo]);
				contentLR.children("td").children("#inputMapPos0").attr("name","travelMapPos"+pageNo);
				contentLR.children("td").children("#inputMapPos0").attr("id","inputMapPos"+pageNo);
				contentLR.children("td").children("#inputMapInfo0").attr("value",JSON.stringify(board["travelMapInfo"+pageNo]));
				contentLR.children("td").children("#inputMapInfo0").attr("name","travelMapInfo"+pageNo);
				contentLR.children("td").children("#inputMapInfo0").attr("id","inputMapInfo"+pageNo);
				displayMap(pageNo, board["travelMapPos"+pageNo]);

				contentLR.children("td").eq(1).text("");
				contentLR.children("td").eq(1).append(board["travelContent" + parseInt(pageNo+1)]);
			}

			function pageUp() {
				if(pageNo == maxPage) return;
				pageNo++;
				if(pageNo > 1) $("#before").show();
				if(pageNo == maxPage) $("#next").hide();
				else $("#next").show();
				renewContent();
			}

			function pageDown(){
				if(pageNo == 1)	return;
				pageNo--;
				if(pageNo < maxPage) $("#next").show();
				if(pageNo == 1) $("#before").hide();
				else $("#before").show();
				renewContent();
			}

		</script>
	</head>
	<body onload="renewContent();">
		<header>
			<div id = "backtoindex" style="position:absolute; top:25px; text-align:center; width:200px;">
				<a href = "../board/tripplan" style="color:black;text-decoration: none;">wtg</a>
				</div>
				<nav    style="position:absolute;right:0px;width:80%;">  
				<ul style= "display: inline-block;width :15%;">
					<li><a href= "../board/tripplan"    style="color:black;text-decoration: none;">   여행 플랜</a></li>
					<li><a href= "../board/triplog"     style="color:black;text-decoration: none;">   여행 일지</a></li>
					<li><a href= "../board/tripforum"   style="color:black;text-decoration: none;">   여행게시판</a></li>
					<li><a href= "../board/countryforum"style="color:black;text-decoration: none;">     해외 포럼</a></li>
					<li><a href= "../board/freeforum"   style="color:black;text-decoration: none;">   자유게시판</a></li>
				</ul>
			  </nav>
		</header>
  		<section>
			<article id = "index2">
				<div id = "upperBoardBorderSolid">
					<%
						//지도들어가는자리.
						//travelMapPos1부터 travelMapPos10까지 받음
					%>
				</div>

				<div id = "mainBoard">
					<table style="width:100%;table-layout:fixed" id="contentTable">
							<thead style ="text-align:center;">
								<tr style = "background-color:#B2CCFF">
									<th width = "10%">나라</th>
									<th width = "20%"><%=board.travelCountry%></th>
									<th width = "10%">출발일</th>
									<th width = "25%"><%=board.travelStartDate%></th>
									<th width = "10%">총여행기간</th>
									<th width = "25%"><%=+board.travelTotalSpanTime%></th>
								</tr>
								<tr>
									<td >작성자</td>
									<td ><%=board.travelWriter%></td>
									<td >제목</td>
									<td colspan="3" ><%=board.travelTitle%></td>
								</tr>
								<tr style = "background-color:#B2CCFF">
									<th colspan="3">
										<label id="dayL">1일차</label>
									</th>
									<th colspan="3">
										<label id="dayR">2일차</label>
									</th>
								</tr>
							</thead>
							<tbody >
									<td colspan = "3">
									</td>
									<td colspan = "3">
									</td>
							</tbody>
						</table>
				</div>

				<div >
					<button id="before" onclick="pageDown()" style="display:none" >이전페이지로</button>
					<button id="next" onclick="pageUp()" >다음페이지로</button>
					<%if(board.travelWriterID==userID){%>
					<a onclick = "return confirm('수정하시겠습니까?')" href="./reformTravel?key=<%=board.key%>">수정</a>
					<a onclick = "return confirm('삭제하시겠습니까?')" href="./deleteActionTravel?key=<%=board.key%>">삭제</a>
					<%}%>
				</div>
			</article>
			<article id = "LoginMenu">
				<% if(!username){ %>
					<form method = "post" action = "../users/login">
						<div id = "idpwd1">
							
							<div id = "id">
								아이디
								<div id = "idbox"><input type = "text" name = "userid" class = "form-control" size = "30"></div>
							</div>
							
							<div id = "psd">
								패스워드
								<div id = "psdbox"><input type = "password" name = "userpassword" class = "form-control" size = "20"></div>
							</div>
							
							<button id = "login"type = "submit" >로그인</button>
						</div>
						
						<div id = "idpwd1">
							<div id = "createidandpassword">
								<a href = "../users/join">회원가입</a>
							</div>
						</div>
					</form>

				<%}else{ %>
					<%= username %>님 환영합니다.<br>
					<a href = "../users/logout">로그아웃.</a>
				<%} %>
			</article>
		</section>
		<footer>
			
			개인정보처리방침<br>
			copyright  all right reserved
		</footer>
	</body>
</html>
