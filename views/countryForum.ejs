<%
	//검색조건으로 검색한 보드 데이터시트
	var boardList=[];
	var userName = "";

	//보드 총개수
	var numberOfSearchedBaords=boardList.length;
%>



<%
var boardType="countryForum";


	//검색사안
	var search = "";
	

	var adr = loaction.search;
	var res = ard.split("&");
	var pageNo=1;
	//href로 검색한것 int변형해서 가져올수 있다면, 페이지번호 바꿔줌.
	if(res.length!=0)
	{
		for(int i=0; i<res.length;i++)
		{
			var r=res[i]
			if(r.split("=")[0]=="pageNo")
			{
				pageNo=parseInt(r.split("=")[1]);
			}

		}
	}

	//페이지당 보드 출력수.
	var boardIndexNoPerPage=15;

%>



<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset = "UTF-8">
<title>WTG</title>
<link rel = "stylesheet" href= "./styles/styles.css"/>
</head>
</head>
<body>
<header>
	<%- include ('./part/header.ejs') %>
</header>
<section>
	<article id = freeForum1>
		<div id = "upperBoardBorderSolid">
			해외포럼
		</div>
		<div id = "mainBoard">
			<table style="width:100%;text-align:center;" >
				<thead style ="text-align:center;background-color:#B2CCFF;">
					<tr >
						<th width="10%">번호</th>
						<th width="15%">분류</th>
						<th width = "60%">제목</th>
						<th width = "15%">작성자</th>
					</tr>
				</thead>
				<tbody>

<%//보드 내용 검색
					//보드 에러
					if(boardList==null){%>
						<tr><td colspan = "6"><h1 >등록된 보드가 없습니다.</h1></td></tr>
					<%}

					//보드 검색내용 없음
					else if(numberOfSearchedBaords==0){%>
					<tr><td colspan = "6"><h1 >등록된 글이 없습니다..</h1></td></tr>
					<%}

					//보드 검색중.
					else{
						//순서검색
						var  NoStart =numberOfSearchedBaords-(pageNo-1)*boardIndexNoPerPage;var NoNextStart = NoStart-boardIndexNoPerPage;

						
						for(var indexNo=NoStart ;(indexNo>=1)&&(indexNo>NoNextStart);indexNo--){%>
							<tr>
								<td><a href= "./countryForum2?boardNo=<%=boardList[indexNo-1].boardNo%>" style="text-decoration:none;color:black"><%=indexNo%></a></td>	
								<td><a href= "./countryForum2?boardNo=<%=boardList[indexNo-1].boardNo%>" style="text-decoration:none;color:black">
									<%if(boardList[indexNo-1].boardClassfy=="Korea"{%>한국
									<%}else if(boardList[indexNo-1].boardClassfy=="Japan"){%>일본
									<%}else if(boardList[indexNo-1].boardClassfy=="China"){%>중국
									<%} %>
								</a></td>	
								<td><a href= "./countryForum2?boardNo=<%=boardList[indexNo-1].boardNo%>" style="text-decoration:none;color:black"><%=boardList[indexNo-1].boardTitle%></a></td>	
								<td><a href= "./countryForum2?boardNo=<%=boardList[indexNo-1].boardNo%>" style="text-decoration:none;color:black"><%=boardList[indexNo-1].boardWriter%></a></td>
							</tr>
					
						<%}
					}%>
				</tbody>
			</table>
			</div>
			<div id = "BoardSearch">
				
				<%
				//글수에 따라 << 1 ... 10>>, <<현재 , ... , 현재+8 >>식 이동.
				//가장 오랜된글 >>(맨끝으로)
				//1 : <<(최신글로)
				//MaxIndexAdd1 : 10개 못채우는 나머지 있을때 최대페이지번호 +1해줘야함.
				if(boardList!=null&&numberOfSearchedBaords!=0){
							
					var MaxIndexAdd1=0;		if(numberOfSearchedBaords%boardIndexNoPerPage!=0){MaxIndexAdd1=1;}
					var MaxIndex=parseInt(numberOfSearchedBaords/boardIndexNoPerPage)+		MaxIndexAdd1;%> 
					<div id="BoardPageNo">
						<a href="./countryForum?pageNo=<%=1%>"><<</a>
							<%
							//시작번호 10넘어가면 현재번호부터 10개
							if(pageNo>10)
							{
								//-10돌아가는 < 추가.%>
								<a href="./countryForum?pageNo=<%=pageNo-10%>"> &nbsp < &nbsp </a>	
								<%//1페이지씩 표시.
								for(var i=pageNo;(i<pageNo+10)&&(i<=MaxIndex);i++)
								{%>
									<a href= "./countryForum?pageNo=<%=i%>"><%=i%></a>
								<%}
								//+10이후 더있으면 +10하는 >추가.
								if(pageNo+10<MaxIndex){%><a href="./countryForum?pageNo=<%=pageNo+10%>"> &nbsp > &nbsp </a><%}
							}else{		
							//1붙터 시작하면 10or최대값 까지
								for(var i=1;(i<=MaxIndex);i++){%><a href= "./countryForum?pageNo=<%=i%>"><%=i%></a><%}
							}%>
							<a href="./countryForum?pageNo=<%=MaxIndex%>">>></a>
					</div>
				<%}%>
				
				
				<%if(userName!=null&&userName!="") {%>
						<div ><a href= "./boardEnroll?boardType=countryForum"><button  >글쓰기</button></a></div>
				<%}%>
				<form action ="./countryForum" method = "get" >
					<select name = "boardClassfy" class =  "form-control">
						<option   value = "All" selected > 나라</option>
						<option value = "Japan" > 일본</option>
						<option value = "Korea" > 한국</option>
						<option value = "China" > 중국</option>
					</select>
					
					<select name = "Order" class =  "form-control">
						<option   value = "None" selected > 정렬</option>
						<option value = "제목" > Title</option>
						<option value = "작성자" > Writer</option>
					</select>
					<br>
					<select name = "SearchFor" class =  "form-control">
						<option   value = "All" selected > 전체</option>
						<option value = "제목" > Title</option>
						<option value = "작성자" > Writer</option>
					</select>
					<input type = "text" name = "search" style="width:800px;" >
					<button>검색</button>
				</form>
			</div>
		</article>
	

		<article id = "LoginLoginMenu">
			<%- include ('./part/login.ejs')%>
		</article>
	</section>
	<footer>
      <%- include ('./part/footer.ejs') %>
	</footer>
</body>

</html>=
