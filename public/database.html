<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>테스트 인덱스 페이지</title>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.5.0/firebase.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script>

<!-- include libraries(jQuery, bootstrap) -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script> 

<script>
  window.onload = function(){
  getDB("-Lw7VDs5FBe3iwTiGqGF");
	}


  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyCTMbPV8BsmuGgzf97n-At-1CnOV4n0KRA",
    authDomain: "wtgo-17e32.firebaseapp.com",
    databaseURL: "https://wtgo-17e32.firebaseio.com",
    projectId: "wtgo-17e32",
    storageBucket: "wtgo-17e32.appspot.com",
    messagingSenderId: "442941794543",
    appId: "1:442941794543:web:079c3981e37f3d6d77531a",
    measurementId: "G-NFMN1S3123"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();




  //데이터 가져올 자료형 선언
  var postData = {
	 brdno: "",
	 brdwriter:"글쓴이",
	 brdtitle:"제목",
	 brdmemo:"내용",
	 brddate: ""
	};

  //보드 No 기반으로 데이터 가져옴
function getDB(boardNo){
	postData.brdno = boardNo;
	$("#brdNo").html(postData.brdno);
	//레퍼런스 경로 선언
	var boardRef = firebase.database().ref('/board/');
	//경로에 있는 대상으로 list함수 실행
	boardRef.on('child_added', on_Board_List);
}

//데이터 받아와서 그 중에 boardno이 입력한 것과 같으면 해당 데이터의 값을 자료형에 입력
function on_Board_List(data){
	if(data.val().brdno == postData.brdno){
		var Data = data.val();
		postData.brdwriter = Data.brdwriter;
		postData.brdtitle = Data.brdtitle;
		postData.brdmemo = Data.brdmemo;
		postData.brddate = Data.brddate;
	}

	//받아온 데이터를 html로 표시
	$("#Title").html(postData.brdtitle);
	$("#Writer").html(postData.brdwriter);
	$("#textArea").html(postData.brdmemo);
}

</script>

</head>
<body>

	<h1>테스트 중인 페이지</h1>
	<p>파이어베이스에서 데이터 받아와서 표시</p>

	<script>
		
    </script>

	<section>
	<div>
	<tr>
		<div id="brdNo">테이터베이스 번호</div>
		<th width = "10%">제목</th>
		<th width = "40%"><div id="Title">제목</div></th>
		<th width = "30%">작성자</th>
		<th width = "30%"><div id="Writer">글쓴이</div></th>
	</tr>
	<tr ><div id="textArea">내용</div></tr>
	</div>
	</section>
</body>


</html>